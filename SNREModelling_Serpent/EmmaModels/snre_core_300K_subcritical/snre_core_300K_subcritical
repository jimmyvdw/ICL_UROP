% --- Small Nuclear Rocket Engine (SNRE) core ------------------------

set title "snre_core_90deg_300K"

% Drums are at the critical position by default, to switch to subcritical rotate control drums 90 degrees anticlockwise (90), to switch to fully withdrawn rotate drums 90 degrees clockwise (-90) as below

trans U 12 rot  10.617  39.623 0.0 0.0 0.0 1.0 90
trans U 13 rot  29.006  29.006 0.0 0.0 0.0 1.0 90
trans U 14 rot  39.623  10.617 0.0 0.0 0.0 1.0 90
trans U 15 rot  39.623 -10.617 0.0 0.0 0.0 1.0 90
trans U 16 rot  29.006 -29.006 0.0 0.0 0.0 1.0 90
trans U 17 rot  10.617 -39.623 0.0 0.0 0.0 1.0 90
trans U 18 rot -10.617 -39.623 0.0 0.0 0.0 1.0 90
trans U 19 rot -29.006 -29.006 0.0 0.0 0.0 1.0 90
trans U 20 rot -39.623 -10.617 0.0 0.0 0.0 1.0 90
trans U 21 rot -39.623  10.617 0.0 0.0 0.0 1.0 90
trans U 22 rot -29.006  29.006 0.0 0.0 0.0 1.0 90
trans U 23 rot -10.617  39.623 0.0 0.0 0.0 1.0 90

% -----------------------------------------------------------------------------

% Geometry

% -----------------------------------------------------------------------------

surf 1   cylz  0.0 0.0 0.11827
surf 2   cylz  0.0 0.0 0.12827
surf 4   hexyc 0.0 0.0 0.9475
surf 5   hexyc 0.0 0.0 0.9525
surf 201 hexyc 0.0 0.0 0.9474
surf 200 inf

% Define the assembly
cell 1 3 coolant   -1
cell 2 3 coating 1 -2
cell 3 3 fuel    2

% Define the void assembly
cell 7 4 fuel -200

lat 5 2 0.0 0.0 7 7 0.40894
 4 4 4 4 4 4 4
  4 4 4 3 3 3 4
   4 4 3 3 3 3 4
    4 3 3 3 3 3 4
     4 3 3 3 3 4 4
      4 3 3 3 4 4 4
       4 4 4 4 4 4 4

cell 9   1 fill 5 -4
cell 10  1 coating 4

% Define the support element
surf 6  cylz 0.0 0.0 0.20955
surf 7  cylz 0.0 0.0 0.26035
surf 8  cylz 0.0 0.0 0.2667
surf 9  cylz 0.0 0.0 0.5842
surf 10 cylz 0.0 0.0 0.67818
surf 11 cylz 0.0 0.0 0.6985
surf 12 cylz 0.0 0.0 0.70485
surf 13 cylz 0.0 0.0 0.80645
surf 90 cylz 0.0 0.0 0.70485
surf 91 cylz 0.0 0.0 0.80645
surf 14 cylz 0.0 0.0 0.8128

% Define cells of support element
cell 12 2 coolant        -6
cell 13 2 tie_tube   6   -7
cell 14 2 stag_hyd   7   -8
cell 15 2 moderator  8   -9
cell 16 2 coolant    9  -10
cell 17 2 tie_tube  10  -11
cell 18 2 stag_hyd  11  -12
cell 19 2 insulator 12  -13
cell 20 2 stag_hyd  13  -14
cell 21 2 sleeve    14 -201
cell 22 2 coating  201

% Define the reflector assembly
cell 24 6 be_ref -200

lat 10 3 0.0 0.0 37 37 1.905

    6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
     6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 1 1 1 1 6 6 6 6 6 6 6 6
      6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 1 1 1 1 1 2 1 1 1 1 1 6 6 6 6 6
       6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6
        6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6
         6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6
          6 6 6 6 6 6 6 6 6 6 6 6 6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6
           6 6 6 6 6 6 6 6 6 6 6 6 6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6 6
            6 6 6 6 6 6 6 6 6 6 6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6
             6 6 6 6 6 6 6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6
              6 6 6 6 6 6 6 6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6
               6 6 6 6 6 6 6 6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6
                6 6 6 6 6 6 6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6
                 6 6 6 6 6 6 6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6 6
                  6 6 6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6
                   6 6 6 6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6
                    6 6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6
                     6 6 6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6 6
                      6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6
                       6 6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6 6 6
                        6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6 6
                         6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6 6 6 6
                          6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6 6 6
                           6 6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6 6 6 6 6 6 6
                            6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6 6 6 6 6 6 6
                             6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6 6 6 6 6 6 6 6
                              6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6 6 6 6 6 6 6 6
                               6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6 6 6 6 6 6 6
                                6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6 6 6 6 6 6 6 6 6 6 6
                                 6 6 1 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 1 6 6 6 6 6 6 6 6 6 6 6 6 6
                                  6 6 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 6 6 6 6 6 6 6 6 6 6 6 6 6 6
                                   6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
                                    6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
                                     6 6 6 6 1 1 2 1 1 2 1 1 2 1 1 2 1 1 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
                                      6 6 6 6 6 1 1 1 1 1 2 1 1 1 1 1 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
                                       6 6 6 6 6 6 6 6 1 1 1 1 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6
                                        6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6

% Rotate lattice by 30 degrees to align with control drums

cell 101 core fill 10 -17

% Define control drum surfaces
surf 29 cyl  10.617  39.623 6.0325
surf 30 pad  10.617  39.623 5.3975 6.0325 135 255

surf 50 cyl  29.006  29.006 6.0325
surf 51 pad  29.006  29.006 5.3975 6.0325 165 285

surf 52 cyl  39.623  10.617 6.0325
surf 53 pad  39.623  10.617 5.3975 6.0325 195 315

surf 58 cyl  39.623 -10.617 6.0325
surf 59 pad  39.623 -10.617 5.3975 6.0325 225 345

surf 56 cyl  29.006 -29.006 6.0325
surf 57 pad  29.006 -29.006 5.3975 6.0325 255 15

surf 54 cyl  10.617 -39.623 6.0325
surf 55 pad  10.617 -39.623 5.3975 6.0325 285 45

surf 60 cyl -10.617 -39.623 6.0325
surf 61 pad -10.617 -39.623 5.3975 6.0325 315 75

surf 62 cyl -29.006 -29.006 6.0325
surf 63 pad -29.006 -29.006 5.3975 6.0325 345 105

surf 64 cyl -39.623 -10.617 6.0325
surf 65 pad -39.623 -10.617 5.3975 6.0325 15 135

surf 70 cyl -39.623  10.617 6.0325
surf 71 pad -39.623  10.617 5.3975 6.0325 45 165

surf 68 cyl -29.006  29.006 6.0325
surf 69 pad -29.006  29.006 5.3975 6.0325 75 195

surf 66 cyl -10.617  39.623 6.0325
surf 67 pad -10.617  39.623 5.3975 6.0325 105 225

% Define control drum and control plate combination, as an infinite cylinder
cell 26 12 con_plate -30
cell 27 12 con_drum  -29 30
cell 63 13 con_plate -51
cell 64 13 con_drum  -50 51
cell 65 14 con_plate -53
cell 66 14 con_drum  -52 53
cell 67 15 con_plate -59
cell 68 15 con_drum  -58 59
cell 69 16 con_plate -57
cell 70 16 con_drum  -56 57
cell 71 17 con_plate -55
cell 72 17 con_drum  -54 55
cell 73 18 con_plate -61
cell 74 18 con_drum  -60 61
cell 75 19 con_plate -63
cell 76 19 con_drum  -62 63
cell 77 20 con_plate -65
cell 78 20 con_drum  -64 65
cell 79 21 con_plate -71
cell 80 21 con_drum  -70 71
cell 81 22 con_plate -69
cell 82 22 con_drum  -68 69
cell 83 23 con_plate -67
cell 84 23 con_drum  -66 67

% Define control drum positions
surf 31 cylz  10.617  39.623 6.0325 0.0 89.0
surf 32 cylz  29.006  29.006 6.0325 0.0 89.0
surf 33 cylz  39.623  10.617 6.0325 0.0 89.0
surf 34 cylz  39.623 -10.617 6.0325 0.0 89.0
surf 35 cylz  29.006 -29.006 6.0325 0.0 89.0
surf 36 cylz  10.617 -39.623 6.0325 0.0 89.0
surf 37 cylz -10.617 -39.623 6.0325 0.0 89.0
surf 38 cylz -29.006 -29.006 6.0325 0.0 89.0
surf 39 cylz -39.623 -10.617 6.0325 0.0 89.0
surf 40 cylz -39.623  10.617 6.0325 0.0 89.0
surf 41 cylz -29.006  29.006 6.0325 0.0 89.0
surf 42 cylz -10.617  39.623 6.0325 0.0 89.0

% Define cells for control drums
cell 31 ref fill 12 -31
cell 32 ref fill 13 -32
cell 33 ref fill 14 -33
cell 34 ref fill 15 -34
cell 35 ref fill 16 -35
cell 36 ref fill 17 -36
cell 37 ref fill 18 -37
cell 38 ref fill 19 -38
cell 39 ref fill 20 -39
cell 40 ref fill 21 -40
cell 41 ref fill 22 -41
cell 42 ref fill 23 -42

cell 44 ref stag_hyd      17 -18
cell 45 ref steel_wrapper 18 -19
cell 46 ref stag_hyd      19 -20
cell 47 ref be_barrel     20 -21
cell 48 ref stag_hyd      21 -22
cell 49 ref be_ref        22 27 31 32 33 34 35 36 37 38 39 40 41 42 -23
cell 50 ref stag_hyd      23 47 48 49 -24
cell 51 ref low_tie_plen    -27
cell 52 ref core_sup_plate  -28
cell 53 ref up_tie_plen     -43
cell 54 ref low_in_shield   -44
cell 55 ref hy_plen         -45
cell 56 ref up_in_shield    -46
cell 57 ref con_drum_act  27 28 43 -47
cell 58 ref brim_shield   44 -48
cell 59 ref upper_hyd     45 46 -49
cell 60 ref pres_ves      24 -25

% Define reflector surfaces
surf 17 cylz 0.0 0.0 29.5275  0.0    89.0
surf 18 cylz 0.0 0.0 29.8450  0.0    89.0
surf 19 cylz 0.0 0.0 30.1625  0.0    89.0
surf 20 cylz 0.0 0.0 30.48    0.0    89.0
surf 21 cylz 0.0 0.0 33.3375  0.0    89.0
surf 22 cylz 0.0 0.0 33.6550  0.0    89.0
surf 23 cylz 0.0 0.0 48.387   0.0    89.1
surf 24 cylz 0.0 0.0 48.7045  0.0   129.64
surf 25 cylz 0.0 0.0 49.2633  0.0   129.64
surf 27 cylz 0.0 0.0 33.655  89.0    96.62
surf 28 cylz 0.0 0.0 33.655  96.62  106.78
surf 43 cylz 0.0 0.0 33.655 106.78  111.86
surf 44 cylz 0.0 0.0 33.655 111.86  119.734
surf 45 cylz 0.0 0.0 33.655 119.734 121.766
surf 46 cylz 0.0 0.0 33.655 121.766 129.64
surf 47 cylz 0.0 0.0 48.387  89.1   111.86
surf 48 cylz 0.0 0.0 48.387 111.86  119.734
surf 49 cylz 0.0 0.0 48.387 119.734 129.64
surf 72 cylz 0.0 0.0 43.387   0.0   129.64

trans U core rot 0.0 0.0 0.0 0 0 1 30
trans U ref  rot 0.0 0.0 0.0 0 0 1 15

% Define cells for reflector regions
cell 43  0 fill core    -17
cell 102 0 fill ref  17 -25
cell 62 0 outside    25


% -----------------------------------------------------------------------------

% Material data:

% -----------------------------------------------------------------------------

% -- Fuel: (UC, ZrC)-C graphite composite

mat fuel   -3.64  moder grph 6000

92235.03c    -0.153297
92238.03c    -0.011538
 6000.03c    -0.337912
40000.03c    -0.497253

% --- Fuel rod coating layer

mat coating    -6.73   moder grph 6000

 6000.03c  -0.11625
40000.03c  -0.88375

% -- Coolant: hydrogen

mat coolant  sum

 1001.03c  1.61317E-03

mat stag_hyd  sum

 1001.03c  1.9127E-03

% -- Tie tube material

mat tie_tube   -8.19

 5010.03c  -9.21547E-06
 5011.03c  -4.07845E-05
 6000.03c  -7.30000E-04
13027.03c  -5.00000E-03
14028.03c  -2.92135E-03
14029.03c  -1.53709E-04
14030.03c  -1.04936E-04
15031.03c  -1.40000E-04
16032.03c  -1.32601E-04
16033.03c  -1.07969E-06
16034.03c  -6.30314E-06
16036.03c  -1.57038E-08
22046.03c  -7.12809E-04
22047.03c  -6.56800E-04
22048.03c  -6.64605E-03
22049.03c  -4.97897E-04
22050.03c  -4.86439E-04
24050.03c  -7.93000E-03
24052.03c  -1.59029E-01
24053.03c  -1.83798E-02
24054.03c  -4.66139E-03
25055.03c  -3.18000E-03
26054.03c  -9.59745E-03
26056.03c  -1.56233E-01
26057.03c  -3.67263E-03
26058.03c  -4.97325E-04
27059.03c  -9.10000E-03
28058.03c  -3.52788E-01
28060.03c  -1.40574E-01
28061.03c  -6.21264E-03
28062.03c  -2.01328E-02
28064.03c  -5.29279E-03
29063.03c  -1.86948E-03
29065.03c  -8.60518E-04
41093.03c  -5.12500E-02
42092.03c  -4.31558E-03
42094.03c  -2.75551E-03
42095.03c  -4.79735E-03
42096.03c  -5.08565E-03
42097.03c  -2.94523E-03
42098.03c  -7.52928E-03
42100.03c  -3.07139E-03

% -- Insulator material

mat insulator    -3.365   moder grph 6000

 6000.03c  -0.11625
40000.03c  -0.88375

% -- Moderator material: ZrH1.62

mat moderator   -5.61 moder hzrh 1001 moder zrzrh 40000

 1001.03c  -1.7582E-02
 1002.03c  -4.0412E-06
40000.03c  -9.8241E-01

% -- Support rod structural material

mat sleeve  -1.70  moder grph 6000

 6000.03c    -0.999999
 5010.03c    -1.84309E-07
 5011.03c    -8.15691E-07

% -- Core structural material: stainless steel

mat steel_wrapper   -8.0

 6000.03c    -0.000800
14000.03c    -0.010000
15031.03c    -0.000450
16000.03c    -0.000300
24000.03c    -0.170000
25055.03c    -0.020000
26000.03c    -0.680450
28000.03c    -0.110000
41093.03c    -0.004000
73181.03c    -0.004000

% -- Beryllium barrel

mat be_barrel   -1.848

 4009.03c    -1.0

% -- Beryllium reflector

mat be_ref    -1.848

 4009.03c    -1.0

% -- Control drum

mat con_drum  -1.848

 4009.03c    -1.0

% -- Control plate

mat con_plate   -13.3

72000.03c    -1.0

% -- Pressure vessel

mat pres_ves  -2.7

13027.03c    -1.0

% -- Lower tie tube plenum

mat low_tie_plen  -0.3908

 1001.03c    -0.007418969
 1002.03c    -0.000001705
26000.03c    -0.992579324

% -- Core support plate

mat core_sup_plate  -1.005

 1001.03c    -0.002089072
 1002.03c    -0.000000480
26000.03c    -0.997910448

% -- Upper tie tube plenum

mat up_tie_plen  -0.9718

 1001.03c    -0.002160441
 1002.03c    -0.000000497
26000.03c    -0.997839062

% -- Lower internal shield

mat low_in_shield  -4.4519

 1001.03c    -0.020525838
 1002.03c    -0.000004718
 5010.03c    -0.000910802
 5011.03c    -0.004030909
40000.03c    -0.974527730

% -- Hydrogen plenum

mat hy_plen    -0.0027

 1001.03c  -9.99770E-01
 1002.03c  -2.29797E-04

% -- Upper internal shield

mat up_in_shield  -4.4519

 1001.03c    -0.020525838
 1002.03c    -0.000004718
 5010.03c    -0.000910802
 5011.03c    -0.004030909
40000.03c    -0.974527730

% -- Control drum actuator zone

mat con_drum_act    -0.4279

 1001.03c    -0.005140206
 1002.03c    -0.000001181
26000.03c    -0.649684506
29000.03c    -0.345174106

% -- Brim shield

mat brim_shield  -4.4519

 1001.03c    -0.020525838
 1002.03c    -0.000004718
 5010.03c    -0.000910802
 5011.03c    -0.004030909
40000.03c    -0.974527730

mat upper_hyd    -0.0027

 1001.03c  -9.99770E-01
 1002.03c  -2.29797E-04

% --- Thermal scattering data: required for moderators

%therm grph gre7.00t % ENDFB7 thermal scattering, 00t specifies 296K

therm grph 300 gre7.00t gre7.04t % ENDFB7u thermal scattering at 300K, 00t specifies 296K, 04t specifies 400K

therm hzrh 300 hzrh.10t hzrh.11t % ENDFB7u thermal scattering at 300K, 10t specifies 294K, 11t specifies 400K

therm zrzrh 300 zrzrh.10t zrzrh.11t % ENDFB7u thermal scattering at 300K, 10t specifies 294K, 11t specifies 400K

% -----------------------------------------------------------------------------

% Calculation parameters

% -----------------------------------------------------------------------------

% --- Cross section library file path:

%set acelib "/home/emmajstewart/serpent/serpent2.2.0/xsdata/endfb71/s2v0_endfb71.xsdata"
%set acelib "/home/emmajstewart/serpent/xsdata/endfb7/sss_endfb7u.xsdata"
%set acelib "/home/emmajstewart/serpent/xsdata/endfb68/sss_endfb68u.xsdata"
%set acelib "/home/emmajstewart/serpent/serpent2.2.0/xsdata/endfb60/endf60/sss_endfb60.xsdata"
%set acelib "/rds/general/user/es2517/home/serpent/serpent2.2.0/xsdata/endf60/sss_endfb60.xsdata"
set acelib "/rds/general/user/es2517/home/serpent/serpent2.2.0/xsdata/endfb7u/endfb7/sss_endfb7u.xsdata"
%set pdatadir DIR

set bc 1
set power 367.0E+06
set gcu  0 
set ures 1
set mcvol 50000000
set pop 100000 300 20
%set fum defaultmg 2 1

src 1 n sm fuel

% --- Geometry and mesh plots:

%plot 1 800 800
%plot 2 800 800
plot 3 800 800 40.0
%plot 3 800 800 91.0
%plot 3 800 800 100.0
%plot 3 800 800 109.0
%plot 3 800 800 115.0
%plot 3 800 800 120.0
%plot 3 800 800 125.0

